# เนื้อหาที่เสนอสำหรับ Wiki ของ Albion Insight (ภาษาไทย)

เอกสารนี้ประกอบด้วยโครงสร้างและเนื้อหาที่แนะนำสำหรับ Wiki ของโครงการ Albion Insight จุดมุ่งหมายคือการจัดทำเอกสารที่ชัดเจนและครอบคลุมสำหรับผู้ใช้และผู้ร่วมให้ข้อมูล

## 1. หน้าหลัก (Home)

**หัวข้อ:** Albion Insight: สถิติข้ามแพลตฟอร์มสำหรับ Albion Online

**เนื้อหา:**

**Albion Insight** เป็นเครื่องมือวิเคราะห์สถิติแบบเรียลไทม์สำหรับเกม Albion Online พัฒนาด้วย **Python** และใช้เฟรมเวิร์ก **Flet** โดยนำเสนอโซลูชันข้ามแพลตฟอร์ม (Linux, Windows, macOS) เพื่อติดตามข้อมูลสำคัญในเกม เช่น:

*   **มาตรวัดความเสียหาย (Damage Meter):** ติดตามความเสียหายและการรักษาแบบเรียลไทม์
*   **การติดตามเซสชัน:** ตรวจสอบการได้รับ Silver และ Fame ต่อเซสชัน
*   **การวิเคราะห์ทราฟฟิกเครือข่าย:** ใช้ไลบรารี Scapy เพื่อถอดรหัสแพ็กเก็ตโปรโตคอล Photon

**ทำไมต้อง Albion Insight?**

โครงการนี้เริ่มต้นจากการ *พอร์ต* โครงการดั้งเดิมที่ใช้ C# (`AlbionOnline-StatisticsAnalysis`) เพื่อเอาชนะข้อจำกัดของแพลตฟอร์ม (ต้นฉบับทำงานได้เฉพาะบน Windows) เรามุ่งเน้นที่ **ความเข้ากันได้**, **ความง่ายในการใช้งาน** และ **ความโปร่งใส** ในฐานะโครงการโอเพนซอร์ส

**ลิงก์ด่วน:**
*   [คู่มือการติดตั้ง](#2-คู่มือการติดตั้ง)
*   [คู่มือการใช้งาน](#3-คู่มือการใช้งาน)
*   [การแก้ไขปัญหา (FAQ)](#4-การแก้ไขปัญหา-faq)
*   [วิธีการร่วมให้ข้อมูล](#6-วิธีการร่วมให้ข้อมูล)

---

## 2. คู่มือการติดตั้ง

**หัวข้อ:** การติดตั้งและการตั้งค่า

**เนื้อหา:**

การติดตั้ง Albion Insight ต้องใช้ Python 3.8+ และสิทธิ์ผู้ดูแลระบบ/root สำหรับการจับแพ็กเก็ตเครือข่าย

### 2.1. Linux (แนะนำ)

เราแนะนำให้ใช้สคริปต์การติดตั้งเพื่อการตั้งค่าที่รวดเร็วยิ่งขึ้น:

1.  **โคลน Repository:**
    \`\`\`bash
    git clone https://github.com/dexcarva/AlbionInsight.git
    cd AlbionInsight
    \`\`\`
2.  **ดำเนินการติดตั้ง:**
    \`\`\`bash
    ./install.sh
    \`\`\`
    *สคริปต์นี้จะติดตั้ง system dependencies (`libpcap-dev`) และสร้างสภาพแวดล้อมเสมือน (virtual environment)*
3.  **ดำเนินการแอปพลิเคชัน:**
    \`\`\`bash
    ./run.sh
    \`\`\`
    *สคริปต์ `run.sh` จะขอรหัสผ่าน root/sudo โดยอัตโนมัติเพื่อเริ่มการจับแพ็กเก็ต*

### 2.2. Windows

1.  **ติดตั้ง Python:** ดาวน์โหลดและติดตั้ง Python 3.8+ จาก [python.org](https://www.python.org/downloads/)
2.  **ติดตั้ง Dependencies:**
    \`\`\`powershell
    pip install flet scapy
    \`\`\`
3.  **ดำเนินการในฐานะผู้ดูแลระบบ:** เปิด Command Prompt หรือ PowerShell **ในฐานะผู้ดูแลระบบ** และดำเนินการ:
    \`\`\`powershell
    python -m albion_insight
    \`\`\`

### 2.3. macOS

*คำแนะนำในการติดตั้งสำหรับ macOS จะถูกเพิ่มในเร็วๆ นี้ ปัจจุบันจำเป็นต้องติดตั้งด้วยตนเองผ่าน `pip` และดำเนินการด้วย `sudo`*

---

## 3. คู่มือการใช้งาน

**หัวข้อ:** เริ่มต้นใช้งาน Albion Insight

**เนื้อหา:**

### 3.1. การจับแพ็กเก็ต

Albion Insight จะเริ่มติดตามทราฟฟิกเครือข่ายทันทีที่เริ่มต้นด้วยสิทธิ์ที่สูงขึ้น

*   **การตรวจสอบ:** หากการจับแพ็กเก็ตทำงานอยู่ คุณจะเห็นสถานะการเชื่อมต่อเป็น **"เชื่อมต่อแล้ว"** หรือ **"กำลังติดตาม"** ในอินเทอร์เฟซ
*   **พอร์ต:** การติดตามมุ่งเน้นไปที่พอร์ต 5055, 5056 และ 5058 ซึ่งใช้โดย Albion Online

### 3.2. มาตรวัดความเสียหาย (Damage Meter)

แท็บ "Damage Meter" จะแสดงสถิติการต่อสู้แบบเรียลไทม์

| เมตริก | คำอธิบาย |
| :--- | :--- |
| **ความเสียหายรวม** | ความเสียหายรวมที่คุณและปาร์ตี้ของคุณทำได้ |
| **การรักษารวม** | การรักษารวมที่คุณและปาร์ตี้ของคุณทำได้ |
| **DPS (Damage per Second)** | อัตราความเสียหายที่ทำได้ในช่วงเวลาของเซสชัน |
| **เหตุการณ์** | รายการเหตุการณ์การต่อสู้ที่ถอดรหัสแล้ว (อยู่ระหว่างการพัฒนา) |

**การควบคุมเซสชัน:**
*   **เริ่ม/หยุด:** หยุดชั่วคราวหรือดำเนินการติดตามต่อ
*   **รีเซ็ต:** ล้างข้อมูลทั้งหมดของเซสชันปัจจุบัน
*   **บันทึก:** ส่งออกข้อมูลเซสชันไปยังไฟล์ (รูปแบบอยู่ระหว่างการพัฒนา)

---

## 4. การแก้ไขปัญหา (FAQ)

**หัวข้อ:** คำถามที่พบบ่อยและการแก้ไขปัญหา

**เนื้อหา:**

| คำถาม | คำตอบ |
| :--- | :--- |
| **ทำไมฉันถึงต้องมีสิทธิ์ root/administrator?** | ไลบรารี `Scapy` ต้องการการเข้าถึงระดับต่ำไปยังอินเทอร์เฟซเครือข่ายเพื่อ "ดมกลิ่น" (sniff) แพ็กเก็ตข้อมูลของเกม นี่เป็นข้อกำหนดด้านความปลอดภัยของระบบปฏิบัติการ |
| **Albion Insight ปลอดภัยหรือไม่? ฉันจะถูกแบนหรือไม่?** | Albion Insight **เพียงแค่ตรวจสอบ** ทราฟฟิกเครือข่ายเท่านั้น ไม่มีการฉีดโค้ด ไม่มีการแก้ไขไคลเอนต์เกม และไม่มีการทำงานอัตโนมัติ โครงการดั้งเดิม (C#) และ *พอร์ต* นี้ถือว่าปลอดภัยและได้รับอนุญาตจาก Sandbox Interactive (ผู้พัฒนา Albion Online) |
| **ฉันใช้ Linux และเห็นหน้าจอสีขาว** | นี่เป็นปัญหาที่ทราบกันดีในบางการแจกจ่าย LTS ตรวจสอบให้แน่ใจว่าคุณใช้ Albion Insight เวอร์ชันล่าสุด เนื่องจากมีการแก้ไขเมื่อเร็วๆ นี้ หากปัญหายังคงอยู่ โปรดเปิด [Issue บน GitHub](https://github.com/dexcarva/AlbionInsight/issues) |
| **ฉันสามารถใช้กับ VPN หรือ ExitLag ได้หรือไม่?** | ได้ แต่การตั้งค่าอาจซับซ้อนกว่า คุณจะต้องตรวจสอบให้แน่ใจว่า `Scapy` กำลังติดตามอินเทอร์เฟซเครือข่ายที่ถูกต้องซึ่ง VPN ใช้งานอยู่ |

---

## 5. สถาปัตยกรรมโปรโตคอล Photon

**หัวข้อ:** ทำความเข้าใจการถอดรหัสโปรโตคอล Photon

**เนื้อหา:**

Albion Insight ขึ้นอยู่กับการถอดรหัสโปรโตคอลเครือข่าย **Photon** ที่ถูกต้องเพื่อดึงข้อมูลเกม Photon เป็น *มิดเดิลแวร์* เครือข่ายยอดนิยมในเกม และ Albion Online ใช้สำหรับการสื่อสารระหว่างไคลเอนต์และเซิร์ฟเวอร์

### 5.1. ความท้าทายในการถอดรหัส

โครงการดั้งเดิมที่ใช้ C# มีตรรกะการถอดรหัสอยู่แล้ว ความท้าทายใน Albion Insight คือการ **พอร์ต** ตรรกะนี้ไปยัง Python เพื่อให้มั่นใจในความถูกต้องและประสิทธิภาพ

*   **เลเยอร์การจับแพ็กเก็ต:** เราใช้ **Scapy** เพื่อจับแพ็กเก็ต UDP บนพอร์ตเฉพาะของ Albion Online (5055, 5056, 5058)
*   **เลเยอร์การถอดรหัส:** คลาส `ProtocolDecoder` มีหน้าที่:
    1.  ระบุส่วนหัวของแพ็กเก็ต Photon
    2.  แยก **Operation Code (OpCode)** ซึ่งระบุประเภทของเหตุการณ์ (เช่น `UpdateMoney`, `KilledPlayer`)
    3.  ดีซีเรียลไลซ์ *payload* ของแพ็กเก็ตเพื่อแยกข้อมูลที่เกี่ยวข้อง (เช่น จำนวน Silver, ชื่อผู้เล่น)

### 5.2. โครงสร้างข้อมูล

การถอดรหัสจะป้อนข้อมูลไปยังโมเดล `SessionStats` ซึ่งจัดเก็บสถิติสะสมทั้งหมดของเซสชันปัจจุบัน

| ฟิลด์ | คำอธิบาย | ตัวอย่าง OpCode ที่เกี่ยวข้อง |
| :--- | :--- | :--- |
| `total_silver` | Silver รวมที่ได้รับ/เสียในเซสชัน | `UpdateMoney` |
| `total_fame` | Fame รวมที่ได้รับในเซสชัน | `UpdateFame` |
| `damage_done` | ความเสียหายรวมที่ทำได้ | `CastHit`, `Attack` |
| `healing_done` | การรักษารวมที่ทำได้ | `CastHeal` |

**หมายเหตุ:** การถอดรหัสเหตุการณ์การต่อสู้ทั้งหมดเป็นงานที่กำลังดำเนินอยู่ โดยมุ่งเน้นที่การแปลซอร์สโค้ดดั้งเดิมอย่างต่อเนื่อง

---

## 6. วิธีการร่วมให้ข้อมูล

**หัวข้อ:** คู่มือสำหรับนักพัฒนา

**เนื้อหา:**

เรายินดีรับการร่วมให้ข้อมูลทั้งหมด! Albion Insight เป็นโครงการที่พัฒนาอย่างต่อเนื่อง

### 6.1. การตั้งค่าสภาพแวดล้อมการพัฒนา

1.  **โคลน Repository:**
    \`\`\`bash
    git clone https://github.com/dexcarva/AlbionInsight.git
    cd AlbionInsight
    \`\`\`
2.  **สร้างและเปิดใช้งาน Virtual Environment:**
    \`\`\`bash
    python3 -m venv venv
    source venv/bin/activate
    \`\`\`
3.  **ติดตั้ง Dependencies:**
    \`\`\`bash
    pip install -r requirements.txt
    pip install -r requirements-dev.txt # สำหรับเครื่องมือคุณภาพโค้ด
    \`\`\`
4.  **ดำเนินการทดสอบ:**
    \`\`\`bash
    pytest
    \`\`\`

### 6.2. ขั้นตอนการร่วมให้ข้อมูล

1.  Fork repository
2.  สร้าง branch สำหรับฟังก์ชันของคุณ (`git checkout -b feature/my-new-feature`)
3.  ทำการเปลี่ยนแปลงและ **ตรวจสอบให้แน่ใจว่าการทดสอบทั้งหมดผ่าน**
4.  เปิด **Pull Request** และกรอกเทมเพลต PR

*ดูไฟล์ [CONTRIBUTING.md](CONTRIBUTING.md) สำหรับรายละเอียดเพิ่มเติม*
